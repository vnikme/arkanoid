<html>
    <body onload="start()">
        <script>
            function httpGetAsync(theUrl, callback) {
                var req = new XMLHttpRequest();
                req.onreadystatechange = function() {
                    if (this.readyState == 4)
                        callback(this.responseText);
                }
                req.open("GET", theUrl, true); // true for asynchronous
                req.send(null);
            }

            function copy(x) {
                return JSON.parse( JSON.stringify(x) );
            }

            function start() {
                httpGetAsync("http://localhost:8080", (response) => {
                    canv=document.getElementById("gc");
                    ctx=canv.getContext("2d");
                    ctx.fillStyle = "black";
                    ctx.fillRect(0, 0, canv.width, canv.height);
                    var data = JSON.parse(response);
                    for (var i = 0; i < data.bricks.length; ++i) {
                        var brick = data.bricks[i];
                        ctx.fillStyle = "lightgreen";
                        ctx.fillRect(brick.x, brick.y, brick.width, brick.height);
                        //document.getElementById("bricks").innerHTML += (data.bricks[i].coordinates[0] + '<br>');
                    }
                    ctx.fillStyle = "red";
                    var ball = new Path2D();
                    ball.arc(data.ball.x, data.ball.y, data.ball.r, 0, 2 * Math.PI);
                    ctx.fill(ball);
                    ctx.fillStyle = "blue";
                    var platform = new Path2D();
                    platform.arc(data.platform.x, data.platform.y, data.platform.r, 0, 2 * Math.PI);
                    ctx.fill(platform);
                });
            }
        </script>
        <div id="bricks"></div>
        <canvas id="gc" width="400" height="400"></canvas>
    </body>
</html>

